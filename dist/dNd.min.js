function dragNdrop(e){function t(e){w?o(e):(e.style.position=I?"auto":"relative",e.style.zIndex="999",L&&"x"===L||"y"===L?e.style.cursor="x"===L?"col-resize":"row-resize":e.style.cursor="move")}function o(e){var t=E(e,"position");t&&"static"!==t?e.style.position=t:e.style.position=I?"auto":"relative";var o=E(e,"zIndex");o&&"auto"!==o?e.style.zIndex=o:e.style.zIndex="999";var n=E(e,"cursor");n&&"auto"!==o?e.style.cursor=n:L&&"x"===L||"y"===L?e.style.cursor="x"===L?"col-resize":"row-resize":e.style.cursor="move"}function n(e){y("start"),x(N,"dragNdrop--stop"),h(N,"dragNdrop--start"),e.preventDefault?e.preventDefault():e.returnValue=!1,N.style.zIndex=parseInt(N.style.zIndex)+1;var t=document.body.style;t.cursor=t.cursor&&"inherit"!==t.cursor?t.cursor:N.style.cursor;var o;o="touches"in e?e.touches[0]:e,_={x:o.pageX||o.clientX,y:o.pageY||o.clientY},R={x:parseInt(E(N,"left"))||0,y:parseInt(E(N,"top"))||0},r()}function r(){document.addEventListener?(document.addEventListener("mousemove",d,!1),document.addEventListener("touchmove",d,!1),document.addEventListener("mouseup",p,!1),document.addEventListener("touchend",p,!1)):(document.attachEvent("onmousemove",d),document.attachEvent("touchmove",d),document.attachEvent("onmouseup",p),document.attachEvent("touchend",p))}function d(e){var t;y("drag"),x(N,"dragNdrop--start"),h(N,"dragNdrop--drag"),b&&f(N,b),"touches"in e?(e.preventDefault(),t=e.touches[0]):t=e,s(N,t,L)}function s(e,t,o){var n={x:t.pageX||t.clientX,y:t.pageY||t.clientY},r={x:n.x-_.x,y:n.y-_.y};_={x:n.x,y:n.y},a(e,r,o)}function a(e,t,o){o&&o!==!1?c(e,t,o):u(e,{x:R.x+t.x,y:R.y+t.y})}function c(e,t,o){"x"===o?u(e,{x:R.x+t.x,y:R.y}):"y"===o?u(e,{x:R.x,y:R.y+t.y}):S&&(u(e,{x:R.x+t.x,y:R.y+t.y}),i(e,o,!1))}function u(e,t){R={x:t.x,y:t.y},I?(e.style.transform="translate3d("+t.x+"px ,"+t.y+"px , 1px)",e.style.webkitTransform="translate3d("+t.x+"px ,"+t.y+"px , 1px)"):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function i(e,t,o){if(e===t)return!1;for(var n={x:window.scrollY||document.documentElement.scrollTop,y:window.scrollX||document.documentElement.scrollLeft},r={top:t.getBoundingClientRect().top+n.y,left:t.getBoundingClientRect().left+n.x},d={top:t.offsetHeight,left:t.offsetWidth},s={top:e.getBoundingClientRect().top+n.y,left:e.getBoundingClientRect().left+n.x},a={top:e.offsetHeight,left:e.offsetWidth},c=["top","left","top","left"],u=[],i=0,p=c.length;i<p;i++)i<p/2?s[c[i]]>=r[c[i]]?u.push(!0):(u.push(!1),o||l(e,c[i],r[c[i]]-s[c[i]])):s[c[i]]+a[c[i]]<=r[c[i]]+d[c[i]]?u.push(!0):(u.push(!1),o||l(e,c[i],r[c[i]]+d[c[i]]-(s[c[i]]+a[c[i]])));return u[0]&&u[1]&&u[2]&&u[3]}function l(e,t,o){"top"===t?u(e,{y:R.y+o,x:R.x}):u(e,{y:R.y,x:R.x+o})}function p(){y("stop"),x(N,"dragNdrop--drag"),h(N,"dragNdrop--stop");var e=!1;b&&(e=v(N,b)),z&&z({element:N,dropped:e,dropZones:b,constraints:L,customStyles:w}),m(),N.style.zIndex=parseInt(N.style.zIndex)-1,document.body.style.cursor=Y}function m(){document.addEventListener?(document.removeEventListener("mousemove",d,!1),document.removeEventListener("touchmove",d,!1),document.removeEventListener("mouseup",p,!1),document.removeEventListener("touchend",p,!1)):(document.detachEvent("onmousemove",d),document.detachEvent("touchmove",d),document.detachEvent("onmouseup",p),document.detachEvent("touchend",p))}function f(e,t){x(e,"dragNdrop--dropped"),h(e,"dragNdrop--dropable");for(var o=0;o<t.length;o++){var n=t[o];x(n,"dragNdrop__dropzone--dropped"),h(n,"dragNdrop__dropzone--ready")}}function v(e,t){x(e,"dragNdrop--dropable"),x(e,"dragNdrop--dropped");for(var o=[],n=0;n<t.length;n++){var r=t[n];x(r,"dragNdrop__dropzone--ready"),x(r,"dragNdrop__dropzone--dropped"),i(e,r,!0)&&(y("dropped"),h(e,"dragNdrop--dropped"),h(r,"dragNdrop__dropzone--dropped"),o.push(r))}return o.length>0&&o}function y(e){var t;"function"==typeof Event?(t=new Event("dragNdrop:"+e),N.dispatchEvent(t)):document.createEvent&&(t=document.createEvent("CustomEvent"),t.initEvent("dragNdrop:"+e,!0,!0),N.dispatchEvent(t))}function g(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function h(e,t){g(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}function x(e,t){if(g(e,t))if(e.classList)e.classList.remove(t);else{var o=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(o," ")}}function E(e,t){return window.getComputedStyle?window.getComputedStyle(e,null)[t]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null)[t]:e.currentStyle?e.currentStyle[t]:e.style[t]}e?e&&!e.element&&console.log("ERROR: dragNdrop: please provide an element (options.element) that will be made draggable to the function. See reference at: https://github.com/ThibaultJanBeyer/dragNdrop for more info"):console.log("ERROR: dragNdrop: please provide an options object to the function. See reference at: https://github.com/ThibaultJanBeyer/dragNdrop for more info");var N=e.element,w=e.customStyles,L=e.constraints,b=e.dropZones,z=e.callback,I=!("transform"in e)||e.transform,R={},_={x:0,y:0},S=L&&"string"==typeof L.innerHTML,C=document.createElement("div");C.innerHTML='<!--[if lt IE 9]><i id="ie-version-below-nine"></i><![endif]--><!--[if IE 9]><i id="ie-version-nine"></i><![endif]-->';var B=1==C.getElementsByTagName("i").length;if(B&&(console.log("WARNING: dragNdrop: a browser older than IE 10 detected! "," (use top/left position instead of transform, attachEvent instead of addEventListener and initEvent instead of new Event constructor)"),console.log("WARNING: dragNdrop: the tool will probably work but please do yourself a favor and update your browser"),I=!1),h(N,"dragNdrop"),b)for(var T=0,X=b.length;T<X;T++)h(b[T],"dragNdrop__dropzone");t(N);var Y=document.body.style.cursor||"inherit";document.addEventListener?(N.addEventListener("mousedown",n,!1),N.addEventListener("touchstart",n,!1)):(N.attachEvent("onmousedown",n),N.attachEvent("touchstart",n))}